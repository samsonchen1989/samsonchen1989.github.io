<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>ç¨‹åºç”Ÿæˆåœ°ä¸‹åŸ/æ´ç©´(1) #æ•´ç† #ç¿»è¯‘ #Unity - Gamer Cat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
  
  <meta name="description" content="å‰è¨€ åŸå§‹èµ„æ–™æ˜¯æ²¹ç®¡ä¸Šçš„è§†é¢‘æ•™ç¨‹ï¼Œé“¾æ¥æˆ³æˆ‘ï¼Œæ’­ä¸»æ˜¯å—éå°å“¥Sebastian Lagueï¼Œä¸“é—¨åœ¨æ²¹ç®¡ä¸ŠåšProcedural Generation">
  <meta name="author" content="samsonchen">
  <meta itemprop="name" content="ç¨‹åºç”Ÿæˆåœ°ä¸‹åŸ/æ´ç©´(1) #æ•´ç† #ç¿»è¯‘ #Unity - Gamer Cat">
  <meta itemprop="description" content="å‰è¨€ åŸå§‹èµ„æ–™æ˜¯æ²¹ç®¡ä¸Šçš„è§†é¢‘æ•™ç¨‹ï¼Œé“¾æ¥æˆ³æˆ‘ï¼Œæ’­ä¸»æ˜¯å—éå°å“¥Sebastian Lagueï¼Œä¸“é—¨åœ¨æ²¹ç®¡ä¸ŠåšProcedural Generation">
  <meta itemprop="image" content="https://samsonchen1989.github.io/img/author.jpg">
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@samsonchen_1989" />
  <meta name="twitter:title" content="ç¨‹åºç”Ÿæˆåœ°ä¸‹åŸ/æ´ç©´(1) #æ•´ç† #ç¿»è¯‘ #Unity - Gamer Cat" />
  
  <meta name="twitter:description" content="hehe">
  
  <link rel="shortcut icon" href="https://samsonchen1989.github.io/img/favicon.ico"/>
  <link rel="apple-touch-icon" href="https://samsonchen1989.github.io/apple-touch-icon.png" />
  <link rel="apple-touch-icon-precomposed" href="https://samsonchen1989.github.io/apple-touch-icon.png" />
  <link rel="stylesheet" href="https://samsonchen1989.github.io/highlight/styles/github.css">
  <script src="https://samsonchen1989.github.io/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <link rel="stylesheet" href="https://samsonchen1989.github.io/font/hack/css/hack.min.css">
  <link rel="stylesheet" href="https://samsonchen1989.github.io/css/style.css">
</head>

<body>
  <header>
    <div>
  
  <div id="imglogo">
    <a href="https://samsonchen1989.github.io/"><img src="https://samsonchen1989.github.io/img/logo.svg" alt="Gamer Cat" title="Gamer Cat"/></a>
  </div>
  
  <div id="textlogo">
    <h1 class="site-name"><a href="https://samsonchen1989.github.io/" title="Gamer Cat">Gamer Cat</a></h1>
    <h2 class="blog-motto">å¶å°”ç å­—å’Œå†™ä»£ç ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨ç¡è§‰ğŸ˜ªå’Œç©PS4çš„æ‡’çŒ«</h2>
  </div>
  <div class="navbar"><a class="navbutton navmobile" href="#" title="menu"></a></div>
  <nav class="animated">
    <ul>
      
      <li><a href="/">é¦–é¡µ</a></li>
      
      <li><a href="/about">å…³äº</a></li>
      
      <li>
        <form class="search" method="get" action="https://www.google.com/search">
          <div>
            <input type="text" id="search" name="q" placeholder="æœç´¢">
          </div>
        </form>
      </li>
    </ul>
  </nav>
</div>

  </header>
  <div id="container">
    <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody">
    <header class="article-info clearfix">
  <h1 itemprop="name">
      <a href="https://samsonchen1989.github.io/post/proc1/" title="ç¨‹åºç”Ÿæˆåœ°ä¸‹åŸ/æ´ç©´(1) #æ•´ç† #ç¿»è¯‘ #Unity" itemprop="url">ç¨‹åºç”Ÿæˆåœ°ä¸‹åŸ/æ´ç©´(1) #æ•´ç† #ç¿»è¯‘ #Unity</a>
  </h1>
  <p class="article-author">By
    
      <a href="https://samsonchen1989.github.io/" title="samsonchen">samsonchen</a>
    
  </p>
  <p class="article-time">
    <time datetime="2016-09-23 09:19:43 &#43;0800 HKT" itemprop="datePublished">2016å¹´09æœˆ23æ—¥</time>
  </p>
</header>

	<div class="article-content">
    
    

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>åŸå§‹èµ„æ–™æ˜¯æ²¹ç®¡ä¸Šçš„è§†é¢‘æ•™ç¨‹ï¼Œ<a href="https://www.youtube.com/playlist?list=PLFt_AvWsXl0eZgMK_DT5_biRkWXftAOf9">é“¾æ¥æˆ³æˆ‘</a>ï¼Œæ’­ä¸»æ˜¯å—éå°å“¥<a href="https://twitter.com/SebastianLague">Sebastian Lague</a>ï¼Œä¸“é—¨åœ¨æ²¹ç®¡ä¸ŠåšProcedural Generationå’ŒUnityçš„ç›¸å…³æ•™ç¨‹è§†é¢‘ã€‚Unityå®˜æ–¹ä¹ŸæŠŠè¿™ä¸ªç³»åˆ—åŠ åˆ°äº†<a href="https://unity3d.com/learn/tutorials/projects/procedural-cave-generation-tutorial">æ¨èæ•™ç¨‹ä¸­</a>ã€‚&rdquo;Procedural Cave Generation&rdquo;è¿™ä¸ªç³»åˆ—å·²ç»å®Œç»“ï¼Œè‡ªå·±è·Ÿç€åé¢åšäº†ä¸€éï¼Œæ”¶è·é¢‡å¤šï¼Œè¿™é‡Œåšä¸ªæ•´ç†å’Œç¿»è¯‘ï¼Œä¹Ÿç®—å¸®åŠ©è‡ªå·±ç†è§£ã€‚ä»–è¿˜æœ‰ä¸€ä¸ªæ­£åœ¨è¿è½½çš„ç³»åˆ—â€œLandmass Generationâ€ï¼ŒåŠ¨æ€ç”Ÿæˆ3D Terrainï¼Œç­‰å®Œç»“äº†ä¹Ÿå¯ä»¥è€ƒè™‘åšä¸ªæ•´ç†ã€‚
è¿™ä¸ªæ•´ç†ä»¥ç†è§£å’Œä»‹ç»èƒŒæ™¯çŸ¥è¯†ä¸ºä¸»ï¼Œä¼šè´´éƒ¨åˆ†ä»£ç ï¼Œæƒ³çœ‹è¯¦ç»†ä»£ç çš„å¯ä»¥çœ‹ä»–çš„<a href="https://github.com/SebLague/Procedural-Cave-Generation">Githubé¡¹ç›®ä¸»é¡µ</a>ã€‚éƒ¨åˆ†ä»£ç å°å“¥æ˜¯ä¸€ç¬”å¸¦è¿‡ï¼Œå¯èƒ½çœ‹å®Œä½ çŸ¥é“æ€ä¹ˆåšï¼Œä½†ä¸ºä»€ä¹ˆè¿™ä¹ˆåšç†è§£èµ·æ¥å¯èƒ½æœ‰äº›å›°éš¾ï¼Œæˆ‘ä¹Ÿå°½é‡æ‰¾å‡ºç›¸å…³èµ„æ–™è¾…åŠ©ç†è§£ï¼ŒLet&rsquo;s Start!</p>

<h2 id="cellular-automata-ç»†èƒè‡ªåŠ¨æœº">Cellular automata(ç»†èƒè‡ªåŠ¨æœº)</h2>

<p>Cellular Automataæœ€æ—©æ˜¯å†¯è¯ºæ›¼ä¾å¤§çˆ·æå‡ºçš„ç¦»æ•£æ•°å­¦æ¨¡å‹ï¼Œè¯¦ç»†çš„ä¿¡æ¯å¯ä»¥å‚è€ƒ<a href="https://en.wikipedia.org/wiki/Cellular_automaton">Wiki</a>ï¼Œåœ¨æ´ç©´ç”Ÿæˆé‡Œé¢æˆ‘ä»¬åªéœ€è¦å€Ÿé‰´è¿™ä¸ªæ¨¡å‹çš„ä¸‰ä¸ªç‰¹ç‚¹ï¼š</p>

<ol>
<li>ä¸€ä¸ªç”±å¤šä¸ªæ ¼å­Cellç»„æˆçš„Nç»´ç½‘æ ¼ï¼ˆè¿™é‡Œåªè¦ç”¨åˆ°2ç»´ç½‘æ ¼ï¼‰</li>
<li>æ¯æ ¼CellçŠ¶æ€æœ‰é™ï¼ˆè¿™é‡Œåªå–ä¸¤ä¸ªçŠ¶æ€ï¼Œæ¯æ ¼å€¼æ˜¯0-ç©ºåœ°ï¼Œæˆ–è€…1-å¢™ï¼‰</li>
<li>ç½‘æ ¼æŒ‰ç…§æŸç§è§„åˆ™æ¼”å˜ï¼Œæ¯æ ¼CellçŠ¶æ€å˜åŒ–å—å‘¨å›´æ ¼å­çŠ¶æ€çš„å½±å“è€Œå˜åŒ–</li>
</ol>

<p>èƒŒæ™¯çŸ¥è¯†å°±ä»‹ç»è¿™ä¹ˆå¤šï¼Œæ¥ä¸‹æ¥å¼€å§‹ä¸€æ­¥æ­¥å®ç°ã€‚</p>

<h2 id="éšæœºç”Ÿæˆ2ç»´ç½‘æ ¼">éšæœºç”Ÿæˆ2ç»´ç½‘æ ¼</h2>

<p>æ ¹æ®ä¸Šé¢ä»‹ç»çš„Cellular automataç¬¬ä¸€å’Œç¬¬äºŒæ¡è§„åˆ™ï¼Œåœ¨Unityä¸­å»ºç«‹ä¸€ä¸ªè„šæœ¬&rdquo;MapGenerator&rdquo;è´Ÿè´£äºŒç»´ç½‘æ ¼çš„å®ç°ã€‚</p>

<pre><code class="language-csharp">public int width;
public int height;

public string seed;
public bool useRandomSeed;

[Range(0,100)]
public int randomFillPercent;

int[,] map;
</code></pre>

<p>widthå’Œheightä¸ºå¯è®¾ç½®çš„åœ°å›¾å¤§å°ã€‚ç”Ÿæˆåœ°å›¾çš„è§„åˆ™ä¹Ÿå¾ˆç®€å•ï¼Œè®¾ç½®ä¸€ä¸ªrandomFillPercentå€¼ï¼Œå¯¹æ¯ä¸€ç‚¹è¿›è¡Œéå†ï¼Œéšæœºå–å€¼ï¼Œå¦‚æœå°äºrandomFillPercentï¼Œå°†è¯¥ç‚¹è®¾ç½®ä¸º1ï¼Œå¦åˆ™è®¾ç½®ä¸º0ã€‚ä¸€èˆ¬è®¾ç½®randomFillPercentä¸º50å·¦å³ã€‚
è€ƒè™‘åˆ°æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿå­˜å‚¨å’Œé‡æ–°ç”Ÿæˆç›¸åŒçš„åœ°å›¾ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ–ç½‘æ ¼æ—¶å¹¶ä¸æ˜¯å®Œå…¨éšæœºï¼Œè€Œæ˜¯è®¾ç½®ä¸€ä¸ªseedï¼Œè¿›è¡Œä¼ªéšæœºç”Ÿæˆã€‚</p>

<pre><code class="language-csharp">void RandomFillMap() {
    if (useRandomSeed) {
        seed = Time.time.ToString();
    }

    System.Random pseudoRandom = new System.Random(seed.GetHashCode());

    for (int x = 0; x &lt; width; x ++) {
        for (int y = 0; y &lt; height; y ++) {
            if (x == 0 || x == width-1 || y == 0 || y == height -1) {
                map[x,y] = 1; //è®¾ç½®è¾¹ç¼˜å›ºå®šä¸ºå¢™
            } else {
                map[x,y] = (pseudoRandom.Next(0,100) &lt; randomFillPercent)? 1 : 0;
            }
        }
    }
}
</code></pre>

<p><img src="/img/pic2.jpg" alt="" />
é¦–æ¬¡ç”Ÿæˆçš„å›¾å¯èƒ½æ˜¯è¿™ä¸ªæ ·å­ï¼Œåˆ«ç€æ€¥ï¼Œæ¥ä¸‹æ¥æ ¹æ®Cellular Automataçš„ç¬¬ä¸‰ä¸ªç‰¹å¾å¤„ç†ç½‘æ ¼ã€‚</p>

<h2 id="åº”ç”¨è§„åˆ™å¤„ç†ç½‘æ ¼">åº”ç”¨è§„åˆ™å¤„ç†ç½‘æ ¼</h2>

<p>Cellular Automataç½‘æ ¼çš„å¤„ç†è§„åˆ™å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œæ¯”è¾ƒç»å…¸çš„å¦‚<a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway&rsquo;s Game of Lifeç”Ÿå‘½æ¸¸æˆçš„è§„åˆ™</a>ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œå¤„ç†è§„åˆ™æ¯”è¾ƒç®€å•ï¼š</p>

<ol>
<li>ç»Ÿè®¡å½“å‰æ ¼å­Cellå‘¨å›´8ä¸ªç½‘æ ¼çŠ¶æ€ä¸º1ï¼ˆå¢™ï¼‰çš„æ€»å’ŒS</li>
<li>å¦‚æœSå¤§äº4ï¼Œåˆ™æŠŠCellè®¾ä¸º1ã€‚å¦‚æœSå°äº4ï¼Œåˆ™æŠŠCellè®¾ä¸º0ã€‚</li>
<li>å¦‚æœSç­‰äº4ï¼Œåˆ™Cellå€¼ä¿æŒä¸å˜ã€‚</li>
</ol>

<pre><code class="language-csharp">void SmoothMap() {
    for (int x = 0; x &lt; width; x ++) {
        for (int y = 0; y &lt; height; y ++) {
            int neighbourWallTiles = GetSurroundingWallCount(x,y);

            if (neighbourWallTiles &gt; 4)
                map[x,y] = 1;
            else if (neighbourWallTiles &lt; 4)
                map[x,y] = 0;

        }
    }
}

int GetSurroundingWallCount(int gridX, int gridY) {
    int wallCount = 0;
    for (int neighbourX = gridX - 1; neighbourX &lt;= gridX + 1; neighbourX ++) {
        for (int neighbourY = gridY - 1; neighbourY &lt;= gridY + 1; neighbourY ++) {
            if (IsInMapRange(neighbourX, neighbourY)) {
                // ç»Ÿè®¡å‘¨å›´8ä¸ªç‚¹çš„æƒ…å†µï¼Œè¯·å‚è€ƒMoore neighborhood(https://en.wikipedia.org/wiki/Moore_neighborhood)
                if (neighbourX != gridX || neighbourY != gridY) {
                    wallCount += map[neighbourX, neighbourY];
                }
            }
            else {
                wallCount ++;
            }
        }
    }

    return wallCount;
}
</code></pre>

<p>å¾ªç¯ä¸Šè¿°æ­¥éª¤<strong>5</strong>æ¬¡ï¼Œå¯ä»¥çœ‹åˆ°åœ°å›¾çš„å˜åŒ–å¦‚ä¸‹ï¼š
<img src="/img/pic1.jpg" alt="å¯ä»¥çœ‹åˆ°æ•´ä¸ªç½‘æ ¼å˜å¾—è¶Šæ¥è¶Šèšæ‹¢è§„æ•´" />
å¦‚æœä½ å¯¹å…¶ä»–å¤„ç†è§„åˆ™æ„Ÿå…´è¶£ï¼Œå¯ä»¥æŸ¥é˜…ä¸‹é¢ä¸¤ä¸ªé“¾æ¥ï¼š</p>

<p>1.<a href="https://gamedevelopment.tutsplus.com/tutorials/generate-random-cave-levels-using-cellular-automata--gamedev-9664">Generate Random Cave Levels Using Cellular Automata</a></p>

<p>2.<a href="https://www.raywenderlich.com/66062/procedural-level-generation-games-using-cellular-automaton-part-1">Procedural Level Generation in Games using a Cellular Automaton</a></p>

<p>è§„åˆ™æ˜¯å…ˆè®¾å®šä¸€ä¸ªDeathLimitï¼ˆå¦‚3ï¼‰å’ŒBirthLimitï¼ˆå¦‚4ï¼‰ï¼š</p>

<ol>
<li>ç»Ÿè®¡å½“å‰Cellå‘¨å›´ä¸º1ï¼ˆå¢™ï¼‰çš„å€¼S</li>
<li>å¦‚æœCellä¸º1ï¼ˆå¢™ï¼‰ï¼ŒSå€¼å°äºDeathLimitï¼Œåˆ™è®¾ç½®Cellä¸º0</li>
<li>å¦‚æœCellä¸º0ï¼ˆç©ºåœ°ï¼‰ï¼ŒSå€¼å¤§äºBirthLimitï¼Œåˆ™è®¾Cellä¸º1</li>
</ol>

<h2 id="éœ€è¦è§£å†³çš„é—®é¢˜">éœ€è¦è§£å†³çš„é—®é¢˜</h2>

<p>è™½ç„¶ç›®å‰å¯ä»¥ç”Ÿæˆä¸€ä¸ªå–ç›¸ä¸é”™çš„åœ°å›¾ï¼Œä½†è¿˜å­˜ç•™ä¸€äº›é—®é¢˜ï¼š</p>

<ol>
<li>åœ°å›¾ä¸­ä¾ç„¶å­˜åœ¨å°å—çš„ç©ºåœ°é›†åˆæˆ–å¢™é›†åˆã€‚</li>
<li>å¤§å—çš„ç©ºåœ°å¹¶ä¸ç¡®ä¿äº’ç›¸è¿é€šã€‚</li>
</ol>

<p>è¦è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼Œåœ¨ç”Ÿæˆè§„åˆ™ä¸Šåšä¸€äº›ä¼˜åŒ–</p>

<p><a href="http://www.roguebasin.com/index.php?title=Cellular_Automata_Method_for_Generating_Random_Cave-Like_Levels">Cellular Automata Method for Generating Random Cave-Like Levels</a></p>

<p>ä¹Ÿå¯ä»¥å‚è€ƒProcedural Cave Generationè¿™ä¸ªç³»åˆ—æ•™ç¨‹é‡Œï¼ŒSebastianå°å“¥å¼•å…¥çš„â€œæˆ¿é—´Roomâ€çš„æ¦‚å¿µï¼Œå»é™¤è¿‡å°çš„æˆ¿é—´ï¼Œç„¶åå¯¹ç©ºæˆ¿é—´è¿›è¡Œè¿æ¥ï¼Œè¿™ä¸ªæ˜¯part2è¦è®²çš„éƒ¨åˆ†ã€‚</p>

<p><em>æ³¨ï¼šåŸå§‹æ•™ç¨‹ä¸­ï¼Œè®²å®Œæœ¬æ–‡çš„å†…å®¹ï¼ŒSebastianå°å“¥å…ˆå»è®²äº†æ€ä¹ˆåœ¨Unityé‡Œç”ŸæˆäºŒç»´ç½‘æ ¼çš„Meshï¼Œç„¶åå†å›å¤´è®²æˆ¿é—´è¿æ¥ï¼Œè¿™é‡Œæˆ‘å…ˆæ¢ä¸ªé¡ºåºï¼ŒæŠŠå’Œç½‘æ ¼å¤„ç†ç›¸å…³çš„å†…å®¹ä¸€å—è¯´äº†ï¼Œå†æŠŠMeshç”Ÿæˆæ”¾åˆ°æœ€åè¯´ã€‚</em></p>

	</div>
  <footer class="article-footer clearfix">
  



  <div class="article-share" id="share">
    <div data-url="https://samsonchen1989.github.io/post/proc1/" data-title="ç¨‹åºç”Ÿæˆåœ°ä¸‹åŸ/æ´ç©´(1) #æ•´ç† #ç¿»è¯‘ #Unity" data-tsina="" class="share clearfix">
    </div>
  </div>
</footer>

	</article>
  


<section class="comment">
<div id="disqus_thread"></div>
</section>
<script>


var disqus_config = function () {
this.page.url = "https://samsonchen1989.github.io/post/proc1/";
this.page.identifier = "https://samsonchen1989.github.io/post/proc1/";
};
(function() { 
var d = document, s = d.createElement('script');

s.src = '//.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


</div>

    <div class="openaside"><a class="navbutton" href="#" title="æ˜¾ç¤ºä¾§è¾¹æ "></a></div>
<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="éšè—ä¾§è¾¹æ "></a></div>
<aside class="clearfix">
  



  



  
  <div class="archiveslist">
    <p class="asidetitle">å½’æ¡£</p>
    <ul class="archive-list">
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://samsonchen1989.github.io/post/#2016-09">2016å¹´09æœˆ</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://samsonchen1989.github.io/post/#2016-08">2016å¹´08æœˆ</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://samsonchen1989.github.io/post/#2016-07">2016å¹´07æœˆ</a><span class="archive-list-count">1</span>
      </li>
      
    </ul>

  </div>


  



  

</aside>
</div>

  </div>
  <footer><div id="footer" >
  
  <div class="line">
    <span></span>
    <div style='background:no-repeat url("https://samsonchen1989.github.io/img/head.jpeg") left top;-webkit-background-size:6.875em 6.875em;-moz-background-size:6.875em 6.875em;background-size:6.875em 6.875em;' class="author" ></div>
  </div>
  
  
  <section class="info">
    <p>Samsonchenï¼šæ— è¯ç¨‹åºå‘˜ï¼Œæ¸¸æˆçˆ±å¥½è€…ï¼Œpsnå¥–æ¯å’¸é±¼ <br/> å¯¹AIï¼ŒShaderå’ŒProcedural Content Generationæ¯”è¾ƒæ„Ÿå…´è¶£</p>
  </section>
  
  <div class="social-font clearfix">
    
    <a href="http://weibo.com/canselwicecs" target="_blank" title="weibo"></a>
    
    
    <a href="https://twitter.com/samsonchen_1989" target="_blank" title="twitter"></a>
    
    
    <a href="https://github.com/samsonchen1989" target="_blank" title="github"></a>
    
    
    
  </div>
  <p class="copyright">Powered by <a href="http://gohugo.io" target="_blank" title="hugo">hugo</a> and Theme by <a href="https://github.com/coderzh/hugo-pacman-theme" target="_blank" title="hugo-pacman-theme">hugo-pacman-theme</a> Â© 2016
    
    <a href="https://samsonchen1989.github.io/" target="_blank" title="samsonchen">samsonchen</a>
    
  </p>
</div>
</footer>
  <script src="https://samsonchen1989.github.io/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
done = false;
$(document).ready(function(){
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize();
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  $('form.search').on('submit', function (event) {
    if (false === done) {
      event.preventDefault();
      var orgVal = $(this).find('#search').val();
      $(this).find('#search').val('site:https:\/\/samsonchen1989.github.io\/ ' + orgVal);
      done = true;
      $(this).submit();
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>

<script type="text/javascript">
$(document).ready(function(){
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>æ‰«æäºŒç»´ç åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆ</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});
</script>


<link rel="stylesheet" href="https://samsonchen1989.github.io/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="https://samsonchen1989.github.io/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
});
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
  $('#messagesbsb').remove();
</script>



</body>
</html>
